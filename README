# **Expense Tracker - Automated Bank Statement Processing with Prefect**

# **ğŸ“Œ Overview**
This project automates the processing of **bank statements from different banks** (e.g., **Standard Chartered, UOB**). It uses **Prefect** to orchestrate workflows, **Streamlit** for file uploads, and **PostgreSQL** for structured data storage.

## **ğŸŒŸ Key Features**
ğŸ‘‰ **Bulk Upload Bank Statements** using a **Streamlit UI**  
ğŸ‘‰ **Automated Data Preprocessing** (Detects bank source, cleans transactions)  
ğŸ‘‰ **Transaction Categorization** using **LLM API** (Categorizes expenses)  
ğŸ‘‰ **Database Storage** in **PostgreSQL** (Prevents duplicates, ensures integrity)  
ğŸ‘‰ **Workflow Automation** with **Prefect** (Data pipeline automation)

---

# **ğŸ“ Project Structure**
```
expense_tracker/
ï¸ï¸ï¸ï¸ src/
    ğŸ—ƒ ui/                # Streamlit web app (upload UI)
    ğŸ—ƒ pipelines/         # Prefect flows for processing transactions
    ğŸ—ƒ utils/             # Helper functions for data processing
ï¸ï¸ï¸ï¸ data/
    ğŸ—ƒ raw/               # Unprocessed CSV files
    ğŸ—ƒ processed/         # Cleaned and categorized data
ï¸ï¸ï¸ï¸ prefect_blocks/        # Prefect storage and configurations
ï¸ï¸ï¸ï¸ .env                   # Environment variables (DB credentials)
ï¸ï¸ï¸ï¸ .gitignore             # Excludes sensitive files and unnecessary data
ï¸ï¸ï¸ï¸ Dockerfile             # Containerization setup
ï¸ï¸ï¸ï¸ requirements.txt       # Python dependencies
ï¸ï¸ï¸ï¸ README.md              # Project documentation
ï¸ï¸ï¸ï¸ run.py                 # Main script to start Streamlit UI
```

---

## **ğŸ›  Technologies Used**
- **ğŸ›  Prefect** â†’ Task orchestration & scheduling  
- **ğŸ“Š PostgreSQL** â†’ Stores structured expense data  
- **ğŸ”§ Streamlit** â†’ Upload bank statements via web UI  
- **ğŸ“¦ Docker** â†’ Containerized deployment  
- **ğŸ’œ Pandas** â†’ CSV file processing  
- **ğŸŒ FastAPI (Future Scope)** â†’ API for categorized transaction retrieval  

---

## **ğŸš€ How It Works**
1. **Upload CSV files** via **Streamlit UI**  
2. **Prefect detects the bank type** and applies correct preprocessing  
3. **Transaction amounts are cleaned & standardized**  
4. **LLM API categorizes expenses** into predefined subcategories  
5. **Finalized transactions are inserted into PostgreSQL** (duplicates are skipped)  

---

## **ğŸ›  Setup & Installation**
### **1ï¸âƒ£ Clone the Repository**
```sh
git clone https://github.com/msbamhz/expense_tracker.git
cd expense_tracker
```

### **2ï¸âƒ£ Setup Python Environment**
```sh
python -m venv venv
source venv/bin/activate  # On Mac/Linux
venv\Scripts\activate  # On Windows
pip install -r requirements.txt
```

### **3ï¸âƒ£ Set Up Environment Variables**
Create a `.env` file inside the root directory:
```
DB_NAME=FinanceTracker
DB_USER=postgres
DB_PASSWORD=yourpassword
DB_HOST=localhost
DB_PORT=5432
```

### **4ï¸âƒ£ Start the Streamlit UI**
```sh
python run.py
```
or  
```sh
streamlit run src/ui/streamlit_csv_upload.py
```

### **5ï¸âƒ£ Run Prefect Workflow**
```sh
prefect deployment serve
```
or
```sh
python src/pipelines/csv_pipeline.py  # Runs full pipeline
```

---

## **ğŸ’¾ Database Schema**
| Column Name         | Type          | Description |
|---------------------|--------------|-------------|
| `id`               | `SERIAL` (PK) | Unique transaction ID |
| `transaction_date` | `DATE`        | Transaction date |
| `description`      | `TEXT`        | Description of expense |
| `amount`          | `NUMERIC(12,2)` | Amount spent |
| `category`        | `TEXT`        | High-level category (e.g., "Food & Dining") |
| `subcategory`     | `TEXT`        | More specific category (e.g., "Grab Food") |
| `processed_at`    | `TIMESTAMP`   | Time when the transaction was processed |

---

## **ğŸ® Future Enhancements**
- **ğŸ“Œ Add AI-based Categorization** using NLP for smarter expense tracking  
- **ğŸ“Œ Deploy API for data retrieval** via **FastAPI**  
- **ğŸ“Œ Add User Authentication** to manage personal finance securely  
- **ğŸ“Œ Expand Bank Support** beyond **Standard Chartered & UOB**  

---

## **ğŸ‘¨â€ğŸ’» Contributing**
Feel free to fork this repo, create a branch, and submit a pull request! ğŸš€

---

## **ğŸ“ License**
MIT License â€“ Free to use and modify. ğŸ˜Š

---

## **ğŸ“© Contact**
For any inquiries or collaboration, contact:  
ğŸ“ **sufyanamirhamzah@gmail.com**  
ğŸ”— **GitHub:** [msamhz](https://github.com/msamhz)

